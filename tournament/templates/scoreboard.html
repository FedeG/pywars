{% extends "base.html" %}
{% load i18n %}
{% block content %}

    <div class="container main">

      <h1>Tournament</h1>
      <p>This is the general scoreboard of lightcycle.</p>
{% if pending_challenged_bots|length > 0 %}
* Pending challenges
{% endif%}

<table id="score_table" class="table table-striped">  
        <thead>  
          <tr>  
            <th>Position</th>  
            <th>Username</th>  
            <th>Points</th>
            <th>Action</th>
          </tr>  
        </thead>  
        <tbody>
            {% for user_prof in users %}
            <tr>  
            <td>{{forloop.counter}}</td>  
            <td>{{ user_prof }} </td>  
            <td>{{ user_prof.score }}</td>
            <td>
            {% if user_prof.user != user %}
                {% if pending_challenges %}
                    <button type="button" class="btn btn-primary btn-xs" disabled="disabled">
                    {% if user_prof.current_bot in pending_challenged_bots%}
                        Pending
                    {% else %}
                        Challenge
                    {% endif %}
                    </button>
                {% else %}
                    {% if user_prof.current_bot in challenged_bots %}
                        <button type="button" class="btn btn-success btn-xs" disabled="disabled" onclick="postBot({{user_prof.current_bot.id}}, '/challenge')">Played!</button>
                    {% else %}
                        {% if user_prof.current_bot in pending_challenged_bots%}
                            <button type="button" class="btn btn-primary btn-xs" disabled="disabled" onclick="postBot({{user_prof.current_bot.id}}, '/challenge')">Pending
                        {% else %}
                            <button type="button" class="btn btn-primary btn-xs" onclick="postBot({{user_prof.current_bot.id}}, '/challenge')">Challenge
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% endif %}
            
            </td>
          </tr> 
                
            {% endfor %}
        </tbody>  
      </table>
    </div> <!-- /container -->


{% endblock %}
