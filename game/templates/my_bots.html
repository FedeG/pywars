{% extends "base.html" %}
{% load i18n %}

{% block js %}
<script type="text/javascript">
$(document).on("click", ".select_bot", function () {
     var botId = $(this).data('id');
     var botContent = $(this).attr('content');
     $(".modal-content pre").html(botContent);
     $(".modal-title").html($(this).html());

     // As pointed out in comments,
     // it is superfluous to have to manually call the modal.
     // $('#addBookDialog').modal('show');
});
</script>
{{ form.media }}
{% endblock %}

{% block content %}

<div class="container-fluid main">


    <div class="row-fluid">
        <div class="span4">
          <!--Sidebar content-->
            <p>
            <h3>Bot history</h3>
            {% for bot in my_bots %}
                <p>
                <a id="{{bot.pk}}" class="select_bot" content="{{bot.code}}" data-toggle="modal" data-target=".bs-example-modal-lg" href="#">{{bot.creation_date}} {% if bot.is_current_bot %} [CURRENT] {% endif %}</a>
                </p>
            {% endfor %}
        </div>
        <div class="span8">
          <!--Body content-->
    <p><h3>Write your bot here!</h3></p>
        <form action="" method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary btn-xs" name="save_buffer">Save</button>
            <button type="submit" class="btn btn-success btn-xs" name="publish_buffer">Test & publish</button>
            <p><h5>Latest update: {{ user_prof.code_update_date }}</h5></p>
        </form>

    </div>
  </div>


<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"></span></button>
        <h4 class="modal-title" id="myModalLabel"></h4>
    </div>

      <div class="modal-content">
        <pre>

        </pre>
    </div>
  </div>
</div>


</div>

{% endblock %}